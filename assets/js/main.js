const translations = {
    tr: {
        'nav-home': 'Ana Sayfa',
        'nav-about': 'Hakkımda',
        'nav-education': 'Eğitim',
        'nav-experience': 'Deneyim',
        'nav-projects': 'Projeler',
        'nav-certificates': 'Sertifikalar',
        'nav-contact': 'İletişim',
        'hero-title': 'Merhaba, ben Ayşe Begüm Canpolat',
        'hero-subtitle': 'Yazılım Mühendisi',
        'hero-btn': 'Projelerimi Gör',
        'about-title': 'Hakkımda',
        'about-text-1': 'Ben, Yazılım Mühendisliği 4. sınıf öğrencisiyim.',
        'about-text-2': 'Eğitim hayatım boyunca farklı projelerde aktif roller üstlenerek yazılım geliştirme süreçlerinde değerli deneyimler kazandım.',
        'about-text-3': 'Özellikle web geliştirme alanında uzmanlaşmaya odaklandım; bu doğrultuda staj deneyimleri edindim, projeler hayata geçirdim.',
        'about-text-4': 'Kariyerimi bir adım ileriye taşımak için yapay zeka, makine öğrenmesi ve uygulama geliştirme alanlarında kendimi geliştirmeye devam ediyor, edindiğim bilgi ve becerileri yenilikçi projelerde kullanıyorum.',
        'skills-title': 'Yetenekler',
        'about-highlight-edu': 'Eğitim',
        'about-highlight-edu-text': 'Konya Teknik Üniversitesi - Yazılım Mühendisliği',
        'about-highlight-focus': 'Odak Noktası',
        'about-highlight-focus-text': 'Web Geliştirme, Yapay Zeka, UI/UX',
        'about-highlight-contact': 'İletişim',
        'about-skill-web': 'Web Geliştirme',
        'about-skill-lang': 'Yazılım Dilleri',
        'about-skill-ai': 'Yapay Zeka',
        'about-skill-tools': 'Araçlar & Veritabanı',
        'education-title': 'Eğitim',
        'experience-title': 'Deneyim',
        'projects-title': 'Projeler',
        'certificates-title': 'Sertifikalar',
        'section-hint': '✨ Detayları ve görselleri görmek için üzerlerine tıklayabilirsiniz.',
        'contact-title': 'İletişim',
        'footer-text': '&copy; 2025 Ayşe Begüm Canpolat - Tüm hakları saklıdır.',
        'view-certificate': 'Sertifikayı Görüntüle',
        'project-ime': 'IME Otomasyon Sistemi',
        'project-ime-desc': 'Konya Teknik Üniversitesi için geliştirilen İME web tabanlı otomasyon sistemi.',
        'project-housing': 'Akıllı Gayrimenkul Değerleme Uygulaması',
        'project-housing-desc': 'Gelişmiş Makine Öğrenmesi algoritmaları ile konut fiyatlarını yüksek doğrulukla tahmin eden web uygulaması.',
        'project-dental': 'Akıllı Diş Kliniği Yönetim Sistemi',
        'project-dental-desc': 'Diş kliniklerine özel, web tabanlı yönetim ve takip sistemi.',
        'project-todo': 'Flutter To-Do Uygulaması',
        'project-todo-desc': 'Flutter ile geliştirilmiş, kullanıcı dostu görev takip ve yönetim uygulaması.',
        'project-grayscale': 'Görüntü İşleme: Gri Tonlama',
        'project-grayscale-desc': 'OpenCV kullanılarak gri tonlama ve negatif dönüşüm işlemleri.',
        'project-imageprocessing': 'İleri Seviye Görüntü İşleme',
        'project-imageprocessing-desc': 'Hough dönüşümü, boyutlandırma ve filtreleme uygulaması.',
        'education-software': 'Yazılım Mühendisi - (Lisans)',
        'education-software-school': 'Konya Teknik Üniversitesi',
        'education-business': 'İşletme - (Lisans)',
        'education-business-school': 'Anadolu Üniversitesi',
        'experience-aktif-title': 'Stajyer Yazılım Mühendisi — AKTİF BANK',
        'experience-aktif-desc': 'Aktif Bank bünyesinde yazılım geliştirme ve entegrasyon süreçleri.',
        'experience-zorlu-title': 'Stajyer Yazılım Mühendisi — ZORLU HOLDİNG',
        'experience-zorlu-desc': 'Kullanıcı arayüzü iyileştirmeleri ve React geliştirme.',
        'experience-firat-title': 'Stajyer Yazılım Mühendisi — FIRAT ÜNİVERSİTESİ',
        'experience-firat-desc': 'Web geliştirme ve dijital dönüşüm projeleri.',
        'experience-nasa-title': 'Mentör — NASA SPACE APPS',
        'experience-nasa-desc': 'NASA Space Apps Challenge hackathon mentörlüğü.',
        'education-honor-1': 'Yüksek Onur Belgesi 1',
    },
    en: {
        'nav-home': 'Home',
        'nav-about': 'About',
        'nav-education': 'Education',
        'nav-experience': 'Experience',
        'nav-projects': 'Projects',
        'nav-certificates': 'Certificates',
        'nav-contact': 'Contact',
        'hero-title': 'Hi, I\'m Ayşe Begüm Canpolat',
        'hero-subtitle': 'Software Engineer',
        'hero-btn': 'View My Projects',
        'about-title': 'About Me',
        'about-text-1': 'I am a 4th-year Software Engineering student.',
        'about-text-2': 'Gained valuable experience in software development through various projects.',
        'about-text-3': 'Focusing on web development, internships, and real-world projects.',
        'about-text-4': 'Improving skills in AI, machine learning to advance my career.',
        'skills-title': 'Skills',
        'about-highlight-edu': 'Education',
        'about-highlight-edu-text': 'Konya Technical University - Software Engineering',
        'about-highlight-focus': 'Focus Area',
        'about-highlight-focus-text': 'Web Development, Artificial Intelligence, UI/UX',
        'about-highlight-contact': 'Contact',
        'about-skill-web': 'Web Development',
        'about-skill-lang': 'Software Languages',
        'about-skill-ai': 'AI & Machine Learning',
        'about-skill-tools': 'Tools & Database',
        'education-title': 'Education',
        'experience-title': 'Experience',
        'projects-title': 'Projects',
        'certificates-title': 'Certificates',
        'section-hint': '✨ You can click on them to view details and images.',
        'contact-title': 'Contact',
        'footer-text': '&copy; 2025 Ayşe Begüm Canpolat - All rights reserved.',
        'view-certificate': 'View Certificate',
        'project-ime': 'IME Automation System',
        'project-ime-desc': 'Web-based automation system for Workplace Vocational Training at KTU.',
        'project-housing': 'AI-Powered Real Estate Valuation',
        'project-housing-desc': 'Web application that predicts housing prices with high accuracy using advanced ML algorithms.',
        'project-dental': 'Smart Dental Clinic Management',
        'project-dental-desc': 'Web-based management system for dental clinics.',
        'project-todo': 'Flutter To-Do App',
        'project-todo-desc': 'A user-friendly task tracking and management app developed with Flutter.',
        'project-grayscale': 'Image Processing: Grayscale',
        'project-grayscale-desc': 'Grayscale and negative transformation using OpenCV.',
        'project-imageprocessing': 'Advanced Image Processing',
        'project-imageprocessing-desc': 'Hough transform, resizing, and filtering techniques.',
        'education-software': 'Software Engineering - (Bachelor\'s)',
        'education-software-school': 'Konya Technical University',
        'education-business': 'Business Administration - (Bachelor\'s)',
        'education-business-school': 'Anadolu University',
        'experience-aktif-title': 'Software Engineer Intern — AKTİF BANK',
        'experience-aktif-desc': 'Software development and integration at Aktif Bank.',
        'experience-zorlu-title': 'Software Engineer Intern — ZORLU HOLDING',
        'experience-zorlu-desc': 'UI improvements and React development.',
        'experience-firat-title': 'Software Engineer Intern — FIRAT UNIVERSITY',
        'experience-firat-desc': 'Web development and digital transformation.',
        'experience-nasa-title': 'Mentor — NASA SPACE APPS',
        'experience-nasa-desc': 'Mentoring at NASA Space Apps Challenge.',
        'education-honor-1': 'High Honor Certificate 1',
    }
};

// Project Images Configuration
const projectImages = {
    ime: [
        'assets/images/projects/ime/ime-1.png',
        'assets/images/projects/ime/ime-2.png',
        'assets/images/projects/ime/ime-3.png',
        'assets/images/projects/ime/ime-4.png',
        'assets/images/projects/ime/ime-5.png'
    ],
    housing: [
        'assets/images/projects/housing/housing-1.png',
        'assets/images/projects/housing/housing-2.png',
        'assets/images/projects/housing/housing-3.png',
        'assets/images/projects/housing/housing-4.png',
        'assets/images/projects/housing/housing-5.png'
    ],
    dental: ['https://i.hizliresim.com/cbuycsf.png'],
    todo: [
        'assets/images/projects/todo/todo-1.png',
        'assets/images/projects/todo/todo-2.png',
        'assets/images/projects/todo/todo-3.png',
        'assets/images/projects/todo/todo-4.png'
    ],
    grayscale: [
        'assets/images/projects/grayscale/grayscale-1.png',
        'assets/images/projects/grayscale/grayscale-2.png'
    ],
    imageprocessing: [
        'assets/images/projects/imageprocessing/img-1.png',
        'assets/images/projects/imageprocessing/img-2.png',
        'assets/images/projects/imageprocessing/img-3.png',
        'assets/images/projects/imageprocessing/img-4.png'
    ]
};

document.addEventListener('DOMContentLoaded', () => {
    // Language Switcher
    const langBtns = document.querySelectorAll('.lang-btn');

    function updateLanguage(lang) {
        document.documentElement.lang = lang;
        document.querySelectorAll('[data-translate]').forEach(el => {
            const key = el.getAttribute('data-translate');
            if (translations[lang][key]) {
                el.innerText = translations[lang][key];
            }
        });

        langBtns.forEach(btn => {
            if (btn.getAttribute('data-lang') === lang) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
        localStorage.setItem('preferredLanguage', lang);
    }

    const savedLang = localStorage.getItem('preferredLanguage') || 'tr';
    updateLanguage(savedLang);

    langBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            updateLanguage(btn.getAttribute('data-lang'));
        });
    });

    // Intersection Observer for Animations hamburger menu 
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.hidden').forEach(el => observer.observe(el));

    // Mobile Menu
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');

    if (hamburger) {
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            hamburger.textContent = navLinks.classList.contains('active') ? '✕' : '☰';
        });
    }

    // Close mobile menu when a nav link is clicked
    document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', () => {
            if (navLinks.classList.contains('active')) {
                navLinks.classList.remove('active');
                hamburger.textContent = '☰';
            }
        });
    });

    // Modal Logic for Projects & Certificates
    const modal = document.querySelector('.modal');
    const modalImg = document.querySelector('.modal-content img');
    const modalIframe = document.querySelector('.modal-content iframe');
    const closeModal = document.querySelector('.close-modal');
    const prevBtn = document.querySelector('.modal-prev');
    const nextBtn = document.querySelector('.modal-next');

    let currentGallery = [];
    let currentIndex = 0;

    function updateModalButtons() {
        if (!prevBtn || !nextBtn) return;
        if (currentGallery.length > 1 && modalImg.style.display !== 'none') {
            prevBtn.style.display = 'block';
            nextBtn.style.display = 'block';
        } else {
            prevBtn.style.display = 'none';
            nextBtn.style.display = 'none';
        }
    }

    function openModal(src, isPdf = false) {
        if (!modal) return;

        if (isPdf) {
            if (modalImg) modalImg.style.display = 'none';
            if (modalIframe) {
                modalIframe.style.display = 'block';
                modalIframe.src = src;
            }
        } else {
            if (modalIframe) modalIframe.style.display = 'none';
            if (modalImg) {
                modalImg.style.display = 'block';
                modalImg.src = src;
            }
        }

        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        updateModalButtons();
    }

    function closeModalHandler() {
        if (!modal) return;
        modal.classList.remove('active');
        setTimeout(() => {
            if (modalImg) modalImg.src = '';
            if (modalIframe) modalIframe.src = '';
            document.body.style.overflow = '';
        }, 300);
    }

    function showImage(index) {
        if (currentGallery.length === 0) return;
        currentIndex = (index + currentGallery.length) % currentGallery.length;
        if (modalImg) modalImg.src = currentGallery[currentIndex];
    }

    // Project Gallery Logic
    document.querySelectorAll('.project-card').forEach(card => {
        card.addEventListener('click', () => {
            const id = card.getAttribute('data-project-id');
            if (projectImages[id]) {
                currentGallery = projectImages[id];
                currentIndex = 0;
                openModal(currentGallery[0], false);
            }
        });
    });

    // Certificate Logic
    document.querySelectorAll('.cert-link').forEach(link => {
        link.addEventListener('click', (e) => {
            const href = link.getAttribute('href').toLowerCase();
            const isPdf = href.endsWith('.pdf');
            const isImg = href.endsWith('.jpg') || href.endsWith('.jpeg') || href.endsWith('.png');

            if (isPdf || isImg) {
                e.preventDefault();
                currentGallery = []; // Clear gallery for single items
                openModal(link.getAttribute('href'), isPdf);
            }
        });
    });

    // Button Navigation
    if (prevBtn) {
        prevBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showImage(currentIndex - 1);
        });
    }

    if (nextBtn) {
        nextBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showImage(currentIndex + 1);
        });
    }

    // Keyboard Navigation
    window.addEventListener('keydown', (e) => {
        if (!modal.classList.contains('active')) return;
        if (e.key === 'Escape') closeModalHandler();
        if (modalImg.style.display !== 'none' && currentGallery.length > 1) {
            if (e.key === 'ArrowLeft') showImage(currentIndex - 1);
            if (e.key === 'ArrowRight') showImage(currentIndex + 1);
        }
    });

    if (closeModal) {
        closeModal.addEventListener('click', closeModalHandler);
    }

    if (modal) {
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModalHandler();
            }
        });
    }

    // Close on Escape
    window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModalHandler();
    });

    // Smooth Scroll & Active Link
    const sections = document.querySelectorAll('section');
    const navItems = document.querySelectorAll('.nav-links a');

    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (scrollY >= (sectionTop - 200)) {
                current = section.getAttribute('id');
            }
        });

        navItems.forEach(li => {
            li.classList.remove('active');
            if (li.getAttribute('href') === `#${current}`) {
                li.classList.add('active');
            }
        });
    });
});
